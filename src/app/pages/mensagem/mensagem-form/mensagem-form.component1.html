<div fxLayout="column" fxLayoutGap="1.5%" fxLayoutGap.xs="2%">

  <div fxLayout="row">
    <div class="content__title" fxFlex fxFlexAlign="center">
      <span *ngIf="acaoSistema.isAcaoAlterar()">{{'LABEL_ALTERAR_VENDA' | i18n}}</span>
      <span *ngIf="acaoSistema.isAcaoIncluir()">{{'LABEL_INCLUIR_VENDA' | i18n}}</span>
      <span *ngIf="acaoSistema.isAcaoVisualizar()">{{'LABEL_VISUALIZAR_VENDA' | i18n}}</span>
    </div>
  </div>

  <mat-card fxLayout="column" fxLayoutGap="1%" fxLayoutGap.xs="2%">

    <form #formMensagem="ngForm">
      <mat-card fxLayout="column" fxLayoutGap="2%" fxLayoutGap.xs="1%">
        <mat-card-title>
          <span>{{'LABEL_DADOS_VENDA' | i18n}}</span>
        </mat-card-title>
        <mat-card-content fxLayout="column" fxLayoutGap="0.7%" fxLayoutGap.xs="3%">

          <div fxLayout="row" fxLayoutAlign.gt-xs="end end" fxLayout.lt-sm="column" fxLayoutGap="0.7%" fxLayoutGap.xs="3%" fxLayoutGap.xs="7%">
            <div fxLayout="column" fxLayoutAlign.gt-xs="start start" fxLayout.lt-sm="row" fxLayoutGap.lt-sm="3%" fxLayoutGap.gt-xs="7%"
                 *ngIf="acaoSistema.isAcaoAlterar() || acaoSistema.isAcaoVisualizar()">
              <mat-label>{{'LABEL_ACESSO_BLOQUEADO' | i18n}}:</mat-label>
              <mat-label>{{ (mensagem.acessoBloqueado ? 'LABEL_SIM' : 'LABEL_NAO') | i18n }}</mat-label>
            </div>


          </div>

          <div  fxLayout="row" fxLayoutAlign.gt-xs="center end" fxLayout.lt-sm="column" fxLayoutGap="0.7%">
            <div class="content__title" fxFlex fxFlexAlign="start none">
              <span>
                Data da Mensagem
              </span>

              <mat-form-field fxFlex fxFlex.gt-xs="50" fxFlex.lt-sm="100">

                  <div  class="content__title1" fxLayout="row" fxFlexAlign="start none" fxLayoutAlign.gt-xs="start none" fxLayout.lt-sm="column" fxLayoutGap="0.7%">
                <input matInput [matDatepicker]="picker" [(ngModel)]="mensagem.dataAlteracao" name="dataAlteracao" readonly
                       (focus)="picker.open()" (click)="picker.open()"
                       [disabled]="acaoSistema.isAcaoVisualizar()">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </div>
              </mat-form-field>




            </div>

          </div>

        </mat-card-content>
      </mat-card>


      <mat-form-field
      fxFlex.gt-xs="50"
      fxFlex.lt-sm="100"
      fxFlexOffset.gt-xs="1"
    >
  <mat-label>{{ "LABEL_TIPO_PRODUTO" | i18n }}</mat-label>
              <mat-select
                placeholder="{{ 'LABEL_TIPO_PRODUTO' | i18n }}"
                title="{{ 'LABEL_TIPO_PRODUTO' | i18n }}"
                [(ngModel)]="mensagem.produto"
                [disabled]="acaoSistema.isAcaoVisualizar()"
                name="produtoNome"
              >
                <mat-option [value]="undefined">{{
                  "LABEL_SELECIONE" | i18n
                }}</mat-option>
                <mat-option
                  *ngFor="let produto of produtos"
                  [value]="produto.id"
                >
                  {{ produto.nome }}
                </mat-option>
              </mat-select>
            </mat-form-field>





              <mat-header-cell class="style-header" fxHide.xs="true" fxLayoutAlign="center center" *matHeaderCellDef> {{ 'LABEL_TIPO_TELEFONE' | i18n}} </mat-header-cell>
              <mat-cell fxFlex.lt-sm="100" ngClass.gt-sm="style-column" fxLayoutAlign="start center" *matCellDef="let element">
                <div fxFlex fxLayout="row">
                  <div fxFlex="80px" fxHide.gt-xs="true" fxLayoutAlign="center end">
                    <span  class="mat-body-strong" >{{ 'LABEL_TIPO_TELEFONE' | i18n}} :</span>
                  </div>
                  <div >
                    {{mensagem.tipo}}
                  </div>
                </div>
              </mat-cell>







    </form>



    <form #formProduto="ngForm">
      <mat-card fxLayout="column" fxLayoutGap="1%" fxLayoutGap.xs="2%">
        <mat-card-title>
          <span>{{'LABEL_PRODUTOS_ACESSO' | i18n}}</span>
        </mat-card-title>
        <mat-card-content fxLayout="column" fxLayoutGap="0.7%" fxLayoutGap.xs="3%">

          <div fxLayout="row" fxLayoutAlign.gt-xs="center center" fxLayout.lt-sm="column" fxLayoutGap="0.7%"
            *ngIf="!acaoSistema.isAcaoVisualizar()">
            <div fxFlex fxFlex.lt-sm="100">

            </div>

            <mat-form-field fxFlex fxFlex.lt-sm="100">
              <mat-select id="inputProduto" placeholder="{{'LABEL_PRODUTO' | i18n}}" title="{{'LABEL_PRODUTO' | i18n}}" name="produto"
                          [(ngModel)]="produtoInclusao.produto" [disabled]="produtosDisabled || acaoSistema.isAcaoVisualizar()" required
              >
                <mat-option [value]="undefined">{{'LABEL_SELECIONE' | i18n}}</mat-option>
                <mat-option *ngFor="let produto of produtos" [value]="produto">
                  {{produto.nome}}
                </mat-option>
              </mat-select>
              <mat-error validationMessage [submitted]="submittedMensagem"></mat-error>
            </mat-form-field>

            <mat-form-field fxFlex fxFlex.lt-sm="100">
              <mat-select id="inputProduto" placeholder="{{'LABEL_PRECO' | i18n}}" title="{{'LABEL_PRECO' | i18n}}" name="preco"
               [(ngModel)]="produtoInclusao.produto" [disabled]="produtosDisabled  || acaoSistema.isAcaoVisualizar()"

              >
                <mat-option [value]="undefined">{{'LABEL_SELECIONE' | i18n}} </mat-option>
                <mat-option *ngFor="let produto of produtos" [value]="produto">
                  {{produto.preco}}
                </mat-option>
              </mat-select>
              <mat-error validationMessage [submitted]="submittedMensagem"></mat-error>
            </mat-form-field>

            <mat-form-field fxFlex>
              <mat-label>{{'LABEL_QUANTIDADE' | i18n}}</mat-label>
              <input matInput placeholder="{{'LABEL_INFORME_QUANTIDADE' | i18n}}" title="{{'LABEL_QUANTIDADE' | i18n}}" type="quantidade"
                     [(ngModel)]="itemMensagems" name="quantidade" required maxlength="50"
                     [disabled]="acaoSistema.isAcaoVisualizar()"
              >
              <mat-error validationMessage [submitted]="submittedMensagem"></mat-error>

            </mat-form-field>







            <a mat-mini-fab title="{{'LABEL_ADICIONAR_PRODUTO' | i18n}}" class="btn-primary" (click)="adicionarProduto(produtoInclusao, formProduto, $event)">
              <mat-icon>add</mat-icon>
            </a>
          </div>

          <div fxLayout="column" fxFlex="100"*ngIf="dataSourceProdutos.data.length != 0">

            <div class="table-detail">
              <mat-table #table [dataSource]="dataSourceProdutos">


                <ng-container matColumnDef="valorProduto">
                  <mat-header-cell class="style-header" fxHide.xs="true" fxLayoutAlign="center center" *matHeaderCellDef> {{ 'LABEL_VALORPRODUTO' | i18n}} </mat-header-cell>
                  <mat-cell fxFlex.lt-sm="100" ngClass.gt-sm="style-column" fxLayoutAlign="start center" *matCellDef="let element">
                    <div fxFlex fxLayout="row">
                      <div fxFlex="80px" fxHide.gt-xs="true" fxLayoutAlign="center end">
                        <span  class="mat-body-strong" >{{ 'LABEL_VALORPRODUTO' | i18n}} :</span>
                      </div>
                      <div >
                        {{element.preco}}
                      </div>
                    </div>
                  </mat-cell>
                </ng-container>


                <ng-container matColumnDef="quantidade">
                  <mat-header-cell class="style-header" fxHide.xs="true" fxLayoutAlign="center center" *matHeaderCellDef> {{ 'LABEL_QUANTIDADE' | i18n}} </mat-header-cell>
                  <mat-cell fxFlex.lt-sm="100" ngClass.gt-sm="style-column" fxLayoutAlign="start center" *matCellDef="let element">
                    <div fxFlex fxLayout="row">
                      <div fxFlex="80px" fxHide.gt-xs="true" fxLayoutAlign="center end">
                        <span  class="mat-body-strong" >{{ 'LABEL_QUANTIDADE' | i18n}} :</span>
                      </div>
                      <div >
                        {{element.quantidade}}
                      </div>
                    </div>
                  </mat-cell>
                </ng-container>

                <ng-container matColumnDef="nomeProdutoVinculado">
                  <mat-header-cell class="style-header" fxHide.xs="true" fxLayoutAlign="center center" *matHeaderCellDef> {{ 'LABEL_NOME_PRODUTO_VINCULADO' | i18n}} </mat-header-cell>
                  <mat-cell fxFlex.lt-sm="100" ngClass.gt-sm="style-column" fxLayoutAlign="start center" *matCellDef="let element">
                    <div fxFlex fxLayout="row">
                      <div fxFlex="80px" fxHide.gt-xs="true" fxLayoutAlign="center end">
                        <span  class="mat-body-strong" >{{ 'LABEL_NOME_PRODUTO_VINCULADO' | i18n}} :</span>
                      </div>
                      <div >
                        {{element.nomeProduto}}
                      </div>
                    </div>
                  </mat-cell>
                </ng-container>




                <ng-container matColumnDef="remover" *ngIf="!acaoSistema.isAcaoVisualizar()">
                  <mat-header-cell fxFlex.gt-sm="100px" class="style-header f" fxLayoutAlign="center center" *matHeaderCellDef> {{ 'LABEL_REMOVER' | i18n}} </mat-header-cell>
                  <mat-cell fxFlex.lt-sm="100"  fxLayoutAlign="center center"  fxFlex.gt-sm="100px"
                            *matCellDef="let element">
                    <div fxFlex fxLayout="row" fxLayout.lt-sm="column" fxLayoutAlign="center center">
                      <div  fxHide.gt-xs="true" fxLayoutAlign="center center">
                        <span  class="mat-body-strong" >{{ 'LABEL_REMOVER' | i18n}} :</span>
                      </div>
                      <div fxLayout="row" fxLayoutAlign="center center">
                        <a mat-mini-fab title="{{'LABEL_REMOVER_PRODUTO' | i18n}}" class="btn-primary"
                           (click)="removerProduto(element,mensagem)">
                          <mat-icon>delete</mat-icon>
                        </a>
                      </div>
                    </div>
                  </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns" fxHide.lt-sm="true"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;" fxLayout.lt-sm="column" fxLayout="row"
                         fxLayoutAlign.lt-sm="space-around stretch"
                         ngClass.lt-sm="mat-row-lt-sm"
                ></mat-row>

              </mat-table>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </form>


    <mat-card-footer fxLayout="column" fxLayoutGap="1%" fxLayoutGap.xs="2%">
      <div fxLayout="row" fxFlex="100" fxLayoutAlign="end center">
        <div fxFlex.gt-sm="30" fxFlex.sm="50" fxFlex.lt-sm="100" fxFlexAlign="space-between"
             fxLayoutAlign="end center">
          <a title="{{'LABEL_VOLTAR' | i18n}}" (click)="cancelar()" fxFlex fxFlexOffset="1"
             class="mat-button mat-raised-button mat-primary mat-button-base"
             *ngIf="acaoSistema.isAcaoVisualizar()"
          >
            <span>{{'LABEL_VOLTAR' | i18n}}</span>
          </a>
          <a title="{{'LABEL_CANCELAR' | i18n}}" (click)="cancelar()" fxFlex fxFlexOffset="1"
             class="mat-button mat-raised-button mat-warn mat-button-base"
             *ngIf="!acaoSistema.isAcaoVisualizar()"
          >
            <span>{{'LABEL_CANCELAR' | i18n}}</span>
          </a>
          <button type="submit" title="{{'LABEL_SALVAR' | i18n}}" (click)="salvar(mensagem, formMensagem, $event)"
                  fxFlex fxFlexOffset="1"
                  class="mat-button mat-raised-button mat-primary mat-button-base"
                  *ngIf="acaoSistema.isAcaoAlterar() || acaoSistema.isAcaoIncluir()"
          >
            <span>{{'LABEL_SALVAR' | i18n}}</span>
          </button>
        </div>
      </div>
    </mat-card-footer>
  </mat-card>
</div>
